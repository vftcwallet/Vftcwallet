<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Receipt</title>

<style>
body{
  margin:0;
  font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,sans-serif;
  background:#f5f6fa;
  color:#111;
}

.header{
  padding:20px;
  text-align:center;
  font-weight:600;
  font-size:17px;
  background:#fff;
  border-bottom:1px solid #eee;
}

.success-section{
  text-align:center;
  padding:30px 20px 10px 20px;
}

.circle{
  width:60px;
  height:60px;
  border-radius:50%;
  background:#e8f5e9;
  margin:0 auto 15px auto;
  display:flex;
  align-items:center;
  justify-content:center;
  font-size:28px;
  color:#2e7d32;
}

.amount{
  font-size:30px;
  font-weight:bold;
  margin-top:10px;
}

.status{
  color:#2e7d32;
  font-size:14px;
  margin-top:5px;
}

.card{
  background:#fff;
  margin:25px 15px;
  border-radius:12px;
  padding:20px;
  box-shadow:0 2px 10px rgba(0,0,0,0.04);
}

.row{
  display:flex;
  justify-content:space-between;
  padding:14px 0;
  border-bottom:1px solid #f0f0f0;
  font-size:14px;
}

.row:last-child{
  border-bottom:none;
}

.label{
  color:#777;
}

.value{
  font-weight:500;
  text-align:right;
  max-width:60%;
  word-wrap:break-word;
}

.button{
  margin:30px 15px;
  padding:16px;
  width:calc(100% - 30px);
  border:none;
  border-radius:10px;
  background:#D4AF37;
  color:#fff;
  font-size:15px;
  font-weight:600;
  cursor:pointer;
}

.footer{
  text-align:center;
  font-size:12px;
  color:#aaa;
  margin-bottom:20px;
}
</style>
</head>

<body>

<div class="header">
Transaction Receipt
</div>

<div class="success-section">
  <div class="circle">âœ“</div>
  <div class="amount" id="amount"></div>
  <div class="status">Transfer Successful</div>
</div>

<div class="card">

  <div class="row">
    <div class="label">Recipient Bank</div>
    <div class="value" id="bank"></div>
  </div>

  <div class="row">
    <div class="label">Account Number</div>
    <div class="value" id="account"></div>
  </div>

  <div class="row">
    <div class="label">Account Name</div>
    <div class="value" id="accountName"></div>
  </div>

  <div class="row">
    <div class="label">Transaction ID</div>
    <div class="value" id="txnId"></div>
  </div>
  
  <div style="text-align:right; font-size:12px; color:#D4AF37; cursor:pointer;" onclick="copyTxn()">Copy ID</div>

  <div class="row">
    <div class="label">Date</div>
    <div class="value" id="date"></div>
  </div>

  <div class="row">
    <div class="label">Status</div>
    <div class="value" style="color:#2e7d32;">Successful</div>
  </div>

</div>

<button class="button" onclick="goDashboard()">Done</button>

<div class="footer">
VFTC Secure Payment Gateway
</div>

<script>
  const receipt = JSON.parse(localStorage.getItem("lastReceipt"));
  
  if (!receipt) {
    window.location.href = "dashboard.html";
  }
  
  document.getElementById("amount").textContent =
    "â‚¦" + Number(receipt.amount).toLocaleString();
  
  document.getElementById("bank").textContent = receipt.bank;
  document.getElementById("account").textContent = receipt.account;
  document.getElementById("accountName").textContent = receipt.accountName;
  document.getElementById("txnId").textContent = receipt.id;
  document.getElementById("date").textContent = receipt.date;
  
  
  // ðŸ”¥ SAVE RECEIPT TO GOOGLE SHEET
  fetch("https://script.google.com/macros/s/AKfycbwHXKtGZzcdcxrWOQJr1ZoZJWcN5l0j0i4XsfwfPfHa87752nAPVXxDTiDw1BBwQ379uA/exec", {
      method: "POST",
      body: JSON.stringify({
        amount: receipt.amount,
        bank: receipt.bank,
        account: receipt.account,
        accountName: receipt.accountName,
        txnId: receipt.id,
        date: receipt.date,
        status: "Successful"
      })
    })
    .then(res => res.text())
    .then(data => console.log("Saved:", data))
    .catch(err => console.log("Error:", err));
  
  
  function goDashboard() {
    window.location.href = "dashboard.html";
  }
  
  function copyTxn() {
    navigator.clipboard.writeText(receipt.id);
    alert("Transaction ID copied");
  }
</script>

</body>
</html>

